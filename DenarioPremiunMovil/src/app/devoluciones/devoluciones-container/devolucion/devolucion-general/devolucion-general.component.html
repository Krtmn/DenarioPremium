<ion-grid>
  <ion-row>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <!-- <ion-col size="12">
                <ion-label class="titulosnegrita">{{this.clientLogic.clientTags.get('CLI_NEW_POT_EMPRESA')}}</ion-label>
            </ion-col> -->
      <div class="listado-enterprise-selector ion-text-center">
        <ion-select disabled="{{!this.enterpriseServ.esMultiempresa()  || this.returnLogic.returnSent}}"
          [(ngModel)]="empresaSeleccionada" (ionChange)="onEnterpriseSelect()" class="ion-text-center always-flip"
          toggleIcon="caret-down-sharp" interface="popover" labelPlacement="stacked">
          <ion-select-option *ngFor="let emp of listaEmpresa" [value]="emp">{{ emp.lbEnterprise }}</ion-select-option>
        </ion-select>
      </div>
    </ion-col>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <div id="inputClient">
        <ion-input disabled="{{ this.returnLogic.returnSent }}" label="Cliente:" label-placement="floating"
          fill="outline" value="{{ this.cliente.lbClient }}" id="clienteSelect" color="primary"></ion-input>
      </div>
    </ion-col>

    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <!-- debe ir en el ion-card para que el trigger funcione -->
      <app-cliente-selector #selectorCliente *ngIf="!this.returnLogic.returnSent"
        (clienteSeleccionado)="setClientfromSelector($event)"></app-cliente-selector>
    </ion-col>

    <div *ngIf="hasClient">
      <ion-grid>
        <ion-row>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12" *ngIf="returnLogic.validateReturn">
      <div id="inputInvoice">
        <ion-input label="Factura:" label-placement="floating" fill="outline"
          disabled="{{ this.returnLogic.returnSent }}" value="{{ this.returnLogic.newReturn.coInvoice }}"
          id="invoiceSelect" color="primary"></ion-input>
      </div>
    </ion-col>

    <ion-col size="12" size-xs="12" size-sm="12" size-md="12"
      *ngIf="returnLogic.validateReturn && !returnLogic.bloquearFactura">
      <!-- debe ir en el ion-card para que el trigger funcione -->
      <invoice-selector #selectorInvoice (invoiceSeleccionado)="setInvoicefromSelector($event)"></invoice-selector>

    </ion-col>

    <!--     <ion-col size="12" size-xs="12" size-sm="12" size-md="12" *ngIf="this.returnLogic.validateReturn">
      <ion-label>{{this.generalTags.get('DEV_INVOICE')}}</ion-label>
      <div class="listado-enterprise-selector ion-text-center">
        <ion-select disabled="{{ this.returnLogic.returnSent || !this.cliente.idClient }}"
          (ionChange)="onInvoiceSelect()" [(ngModel)]="returnLogic.newReturn.idInvoice"
          class="ion-text-center always-flip">
          <ion-select-option *ngFor="let codigo of returnLogic.invoices" [value]="codigo.idInvoice">{{ 'Factura:' + codigo.coInvoice
            + 'Fecha: ' + (codigo.daInvoice | date: "dd/MM/yyyy") }}
          </ion-select-option>
        </ion-select>
      </div>
    </ion-col> -->

    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <div id="inputResponsable">
        <ion-input disabled="{{ this.returnLogic.returnSent }}" label="{{this.generalTags.get('DEV_RESPONSABLE_DEV')}}:"
          label-placement="floating" fill="outline" value="" id="responsable" color="primary" maxlength="80"
          [(ngModel)]="returnLogic.newReturn.naResponsible" #naResponsibleInput
          (ionInput)="onNaResponsibleChange()"
          ></ion-input>
      </div>
    </ion-col>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <div id="inputFechaDev">
        <ion-label>{{this.generalTags.get('DEV_FECHA_DEV')}}:</ion-label>

        <ion-button disabled="true" id="fechaDevButton" class="letrasFechasButton"
          color="light">{{  dateServ.formatComplete(this.returnLogic.newReturn.daReturn ) }}</ion-button>
      </div>
    </ion-col>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <div id="inputPrecinto">
        <ion-input  disabled="{{ this.returnLogic.returnSent }}"
          label="{{this.generalTags.get('DEV_PRECINTO_DEV')}}:" label-placement="floating" fill="outline" value=""
          [(ngModel)]="returnLogic.newReturn.nuSeal" #nuSealInput
          id="precinto" color="primary" maxlength="30"
          (ionInput)="onNuSealChange()"
          ></ion-input>
      </div>
    </ion-col>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <div id="inputComentario">
        <ion-input disabled="{{ this.returnLogic.returnSent }}" label="{{this.generalTags.get('DEV_COMENTARIO_DEV')}}:"
          label-placement="floating" fill="outline" [(ngModel)]="returnLogic.newReturn.txComment" value="" #txCommentInput
          id="comentario" color="primary" maxlength="500" (ionInput)="onTxCommentChange()"
          ></ion-input>
      </div>
    </ion-col>
    <ion-col size="12" size-xs="12" size-sm="12" size-md="12">
      <ion-label>{{this.generalTags.get('DEV_TIPO_DEV')}}</ion-label>
      <div class="listado-enterprise-selector ion-text-center">
        <ion-select disabled="{{ this.returnLogic.returnSent }}" [(ngModel)]="returnLogic.newReturn.idType"
           class="ion-text-center always-flip" interface="popover" labelPlacement="stacked">
          <ion-select-option *ngFor="let tipoDev of returnLogic.returnTypes" [value]="tipoDev.idType">{{ tipoDev.naType
            }}</ion-select-option>
        </ion-select>
      </div>
    </ion-col>
  </ion-row>
</ion-grid>
  </div>

  </ion-row>

</ion-grid>


<ion-modal [keepContentsMounted]="true" class="fechasModal">
  <ng-template>
    <ion-datetime disabled="{{ this.returnLogic.returnSent }}" locale="es-ES" id="fechaDev" presentation="date"
      [showDefaultButtons]="true" doneText="{{this.generalTags.get('DENARIO_BOTON_ACEPTAR')}}" [(ngModel)]="returnLogic.newReturn.daReturn"
      cancelText="{{this.generalTags.get('DENARIO_BOTON_CANCELAR')}}" [formatOptions]="{ date: dateServ.dateFormatOptionsShort }"></ion-datetime>
  </ng-template>
</ion-modal>
