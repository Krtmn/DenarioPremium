<ion-header :translucent="false">
  <ion-toolbar class="fondoLila">
    <ion-grid>
      <ion-row>
        <ion-col size="1" size-sm="1" size-xs="2">
          <a>
            <!-- <a (click)="goBack()"> -->
            <img routerLink="/visitas" class="fechaAtras" alt="" src="../../../assets/images/flecha-blanca.png" />
          </a>
        </ion-col>
        <ion-col size="8" size-sm="10" size-xs="8">

          <h1 class="tituloModulos">
            {{ this.rolTransportista ? getTag('VIS_NOMBRE_MODULO_DESPACHOS') :
            getTag('VIS_NOMBRE_MODULO')
            }}
          </h1>
        </ion-col>
        <ion-col size="1" size-sm="1" size-xs="2">
          <img class="fechaAtras" alt="" src="../../../assets/images/visitasNuevoBlanco.svg" />
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-toolbar>
    <ion-searchbar show-clear-button="always" class="lupamorada" search-icon="search-circle" clear-icon="trash-bin"
      placeholder="Busqueda..." [debounce]="1000" (ionInput)="handleInput($event)"></ion-searchbar>
  </ion-toolbar>

  <ion-fab slot="fixed" vertical="bottom" horizontal="end" *ngIf="rolTransportista">
    <ion-fab-button>
      <!-- <ion-icon name="document-text"></ion-icon> -->
      <ion-icon name="chevron-up-circle"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button (click)="service.getListFilesPremiumDispatch()">
        <ion-icon name="document" color="light"></ion-icon>
      </ion-fab-button>
      <!--     <ion-fab-button>
        <ion-icon name="color-palette"></ion-icon>
      </ion-fab-button>
      <ion-fab-button>
        <ion-icon name="globe"></ion-icon>
      </ion-fab-button> -->
    </ion-fab-list>
  </ion-fab>

  <ion-list *ngFor="let visit of listaVisitas;" button detail="false">
    <div
      *ngIf="searchText === '' || visit.coVisit.toLowerCase().includes(searchText) || visit.naClient.toLowerCase().includes(searchText)">
      <ion-item button detail="false">
        <ion-label (click)="selectVisit(visit)">
          <ion-text>{{ getTag("VIS_REF") }}{{ visit.idVisit }}</ion-text><br>
          <ion-text>{{ getTag("VIS_CLIENTE") }} {{ visit.naClient}}</ion-text><br>
          <ion-text>{{ getTag("VIS_STATUS") }}</ion-text>
          <ion-text [ngStyle]="{'color': statusColor(visit)}">
            {{ getStatusVisitName(visit.stVisit) }} </ion-text><br>
          <ion-text>{{ getTag("VIS_FECHA") }}{{visit.daVisit.substring(0,10) }}</ion-text><br>
        </ion-label>
        <ion-button (click)="showAlertDelete(visit)" color="danger"
          *ngIf="visit.stVisit ==  VISIT_STATUS_SAVED"><ion-icon slot="icon-only" name="trash"></ion-icon></ion-button>
        <ion-note slot="end"><!-- <ion-icon class="icon-List" name="chevron-forward-outline"></ion-icon> --></ion-note>
      </ion-item>

    </div>
  </ion-list>

  <app-message></app-message>
  <!-- alerta de confirmacion de eliminar -->
  <ion-alert id="alertDeleteModal" [isOpen]='alertDelete' header={{headerDelete}} message={{mensajeDelete}}
    [buttons]="buttonsDelete" (didDismiss)="setAlertDelete(false)"></ion-alert>

  <app-pdf-modal [isOpen]="service.showPdfList" [pdfList]="service.pdfList" [getTag]="getTag.bind(this)"
    [openPdf]="service.openPdf.bind(service)" [close]="service.closePdfList.bind(service)">
  </app-pdf-modal>
</ion-content>