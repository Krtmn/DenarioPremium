<ion-grid>
    <ion-row>
        <ion-col size="12" size-sm="12" size-xs="12">
            <div class="product-card listado-product-structures">
                <ion-col size="12" size-sm="12" size-xs="12">
                <img class="imgProductInvent" alt="" src="{{inventariosLogicService.productSelected.images}}" />
                </ion-col>
                <ion-col size="12" size-sm="12" size-xs="12">
                    <p class="ion-text-center" *ngIf="inventariosLogicService.productSelected.naProduct != undefined">
                        {{inventariosLogicService.productSelected.naProduct}} </p>
                </ion-col>
                <ion-col size="12" size-sm="12" size-xs="12" class="ion-margin-top ion-margin-bottom mt-20 mb-20">
                    <ion-label
                        class="ion-margin-top ion-margin-bottom mt-20 mb-20 ion-text-center">{{this.inventariosLogicService.inventarioTags.get('INV_SELECTOR_CLIENTSTOCK')}}</ion-label>
                </ion-col>

                <!-- <ion-col size="12" size-sm="12" size-xs="12">
                    <div class="listado-tps-selector ion-text-center">
                        <ion-select
                            placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_SELECTOR_PLACEHOLDER')}}"
                            class="ion-text-center always-flip"
                            (ionChange)="addClientStocktMethod($event, inventariosLogicService.productSelected.idProduct,inventariosLogicService.productSelected)"
                            interface="popover" labelPlacement="stacked" >
                            <ion-select-option *ngFor="let tipoPago of inventariosLogicService.tiposPago"
                                [value]="tipoPago">{{tipoPago.name}}</ion-select-option>
                        </ion-select>
                    </div>
                </ion-col> -->
                <!-- BOTON PARA ABRIL MODAL TIPOS DE STOCK-->
                <ion-col size="6" size-sm="12" size-xs="12">
                    <ion-item>
                        <ion-grid>
                            <ion-row>
                                <ion-col size="6" size-sm="12" size-xs="12">
                                    <ion-button id="eventSelect" class="botonAddVerde" expand="block"
                                        (click)="setShowEventModal(true)">
                                        {{this.inventariosLogicService.inventarioTags.get('INV_ADD_TYPE')}}
                                        <!-- {{this.collectService.collectionTags.get('COB_ADD_METODO_PAGO')}} -->
                                    </ion-button>
                                </ion-col>
                            </ion-row>
                        </ion-grid>
                    </ion-item>
                </ion-col>
                <!-- BOTON PARA ABRIL MODAL METODOS DE PAGO-->
                <!-- MODAL PARA LOS TIPOS DE PAGO-->
                <ion-modal [isOpen]="showEventModal" (didDismiss)="setShowEventModal(false)" id="eventModal"
                    size="cover" class="listado-product-structures modalActividades" backdrop-dismiss="false">
                    <ng-template>
                        <ion-grid class="contenedorModalActividades">
                            <ion-row>
                                <ion-col class="" size="12" size-sm="12" size-xs="12">
                                    <ion-text>
                                        <h1 class="ion-text-center">
                                            {{this.inventariosLogicService.inventarioTags.get('INV_SELECTOR_CLIENTSTOCK')}}
                                        </h1>
                                    </ion-text>
                                </ion-col>
                                <ion-col class="" size="12" size-sm="12" size-xs="12">
                                    <ion-list>
                                        <ion-item
                                            *ngFor="let tipoPago of inventariosLogicService.tiposPago; index as type">
                                            <ion-checkbox slot="start" [checked]="tipoPago.selected"
                                                (ionChange)="onSelectTipoPago(tipoPago,type)"></ion-checkbox>
                                            <ion-label class="titulosBold">{{tipoPago.name}}</ion-label>
                                        </ion-item>
                                    </ion-list>
                                </ion-col>
                                <ion-col class="" size="3" size-sm="6" size-xs="6">
                                    <ion-button expand="block" size="small" color="light"
                                        (click)="setShowEventModal(false)">
                                        {{this.inventariosLogicService.inventarioTagsDenario.get('DENARIO_BOTON_CANCELAR')}}
                                    </ion-button>
                                </ion-col>
                                <ion-col class="" size="3" size-sm="6" size-xs="6">
                                    <ion-button expand="block" size="small" class="botonAddVerde"
                                        (click)="onAceptarTiposPago()">
                                        {{this.inventariosLogicService.inventarioTagsDenario.get('DENARIO_BOTON_AGREGAR')}}</ion-button>
                                </ion-col>
                            </ion-row>
                        </ion-grid>
                    </ng-template>
                </ion-modal>
                <!-- MODAL PARA LOS TIPOS DE PAGO-->

                <ion-col size="12" size-sm="12" size-xs="12">
                    <ion-accordion-group expand="inset">
                        <!-- EXHIBICION -->
                        <ion-accordion *ngIf="this.inventariosLogicService.typeExh" value="exh">
                            <ion-item slot="header" color="light">
                                <ion-label>
                                    {{this.inventariosLogicService.inventarioTags.get('INV_TYPESTOCK_EXH')}}
                                </ion-label>
                            </ion-item>

                            <div class="ion-padding" slot="content">
                                <ion-grid>
                                    <ion-row>
                                        <ion-col size="12" size-sm="12" size-xs="12">
                                            <ion-list
                                                *ngFor="let typeStockExh of inventariosLogicService.typeStocks; index as exh">
                                                <div
                                                    *ngIf="typeStockExh.tipo === 'exh' && typeStockExh.idProduct == inventariosLogicService.productSelected.idProduct">

                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <ion-input
                                                            label="{{this.inventariosLogicService.inventarioTags.get('INV_INGRESE_CANTIDAD')}}"
                                                            placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_CANTIDAD')}}"
                                                            type="number" label-placement="floating" fill="outline"
                                                            (ionChange)="setCantidad($event,inventariosLogicService.productSelected.idProduct,exh,'exh')"
                                                            [value]="typeStockExh.cantidad" color="primary"
                                                            class="form-control" required min="1" appForbiddenName="bob"
                                                            [(ngModel)]="typeStockExh.cantidad" #name="ngModel"
                                                            name="cantidad" [id]="exh">
                                                        </ion-input>
                                                    </ion-col>


                                                    <ion-col size="12" size-sm="12" size-xs="12"
                                                        *ngIf="expirationBatch">
                                                        <ion-input
                                                            label="{{this.inventariosLogicService.inventarioTags.get('INV_LOTE')}}"
                                                            placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_INGRESE_LOTE')}}"
                                                            label-placement="floating" fill="outline" #loteExhInput
                                                            (ionChange)="setLote($event,exh,inventariosLogicService.productSelected.idProduct,'exh')"
                                                            (ionInput)="loteExhInput.value = cleanLoteInput(loteExhInput.value);
                                                            typeStockExh.lote = cleanString(typeStockExh.lote);"
                                                            [value]="typeStockExh.lote" color="primary" required="true"
                                                            class="form-control" required min="2" appForbiddenName="bob"
                                                            [(ngModel)]="typeStockExh.lote" #name="ngModel" name="lote">
                                                        </ion-input>
                                                    </ion-col>

                                                    <ion-col class="ion-margin-top ion-margin-bottom mt-20 mb-20"
                                                        size="12" size-sm="12" size-xs="12" *ngIf="expirationBatch">
                                                        <ion-label
                                                            class="ion-margin-top ion-margin-bottom mt-20 mb-20">{{this.inventariosLogicService.inventarioTags.get('INV_FECHAVENCIMIENTO')}}</ion-label>
                                                    </ion-col>
                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <ion-button (click)="setShowDateModalExh(exh, true)"
                                                            color="light" class="letrasFechasButton">
                                                            {{ dateServ.formatShort(typeStockExh.fechaVencimiento) }}
                                                        </ion-button>
                                                        <!-- <a>
                                                            <ion-icon slot="end" src="../../../assets/icon/calendar-outline.svg"></ion-icon>
                                                        </a> -->
                                                    </ion-col>

                                                    <ion-modal [keepContentsMounted]="true" class="fechasModal"
                                                        [isOpen]="typeStockExh.showDateModalExh"
                                                        (didDismiss)="setShowDateModalExh(exh, false)">
                                                        <ng-template>
                                                            <ion-datetime [id]="'fechaVencimiento'+exh"
                                                                presentation="date"
                                                                [(ngModel)]="typeStockExh.fechaVencimiento"
                                                                (ngModelChange)="getFechaValor(typeStockExh.fechaVencimiento,exh,inventariosLogicService.productSelected.idProduct,'exh')"
                                                                [showDefaultButtons]="true"
                                                                doneText="{{this.inventariosLogicService.inventarioTags.get('INV_BOTON_ACEPTAR')}}"
                                                                cancelText="{{this.inventariosLogicService.inventarioTags.get('INV_BOTON_CANCELAR')}}">
                                                            </ion-datetime>
                                                        </ng-template>
                                                    </ion-modal>

                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <div class="listado-enterprise-selector ion-text-center">
                                                            <ion-select
                                                                placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_SELECTOR_PLACEHOLDER')}}"
                                                                class="ion-text-center always-flip"
                                                                [(ngModel)]="this.inventariosLogicService.unitSelected"
                                                                (ionChange)="selectProducUnit($event,exh,'exh')">
                                                                <ion-select-option
                                                                    *ngFor="let producUnit of inventariosLogicService.productSelected.productUnitList"
                                                                    [value]="producUnit">
                                                                    {{ producUnit.naUnit }}
                                                                </ion-select-option>
                                                            </ion-select>
                                                        </div>
                                                    </ion-col>

                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <ion-button
                                                            (click)="deleteTypeStock(exh,inventariosLogicService.productSelected.idProduct,'exh',inventariosLogicService.productSelected)"
                                                            color="danger">
                                                            <ion-icon slot="icon-only" name="trash"></ion-icon>
                                                        </ion-button>
                                                    </ion-col>
                                                </div>
                                            </ion-list>
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </div>
                        </ion-accordion>
                        <!-- EXHIBICION -->

                        <!-- DEPOSITO -->
                        <ion-accordion *ngIf="this.inventariosLogicService.typeDep" value="dep">
                            <ion-item slot="header" color="light">
                                <ion-label>
                                    {{this.inventariosLogicService.inventarioTags.get('INV_TYPESTOCK_DEP')}}</ion-label>
                            </ion-item>

                            <div class="ion-padding" slot="content">
                                <ion-grid>
                                    <ion-row>
                                        <ion-col size="12" size-sm="12" size-xs="12">
                                            <ion-list
                                                *ngFor="let typeStockDep of inventariosLogicService.typeStocks; index as dep">
                                                <div
                                                    *ngIf="typeStockDep.tipo === 'dep' && typeStockDep.idProduct == inventariosLogicService.productSelected.idProduct">
                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <ion-input
                                                            label="{{this.inventariosLogicService.inventarioTags.get('INV_INGRESE_CANTIDAD')}}"
                                                            placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_CANTIDAD')}}"
                                                            type="number" label-placement="floating" fill="outline"
                                                            (ionChange)="setCantidad($event,inventariosLogicService.productSelected.idProduct,dep,'dep')"
                                                            [value]="typeStockDep.cantidad" color="primary"
                                                            class="form-control" required min="1" appForbiddenName="bob"
                                                            [(ngModel)]="typeStockDep.cantidad" #name="ngModel"
                                                            name="cantidad">
                                                        </ion-input>
                                                    </ion-col>

                                                    <ion-col size="12" size-sm="12" size-xs="12"
                                                        *ngIf="expirationBatch">
                                                        <ion-input
                                                            label="{{this.inventariosLogicService.inventarioTags.get('INV_LOTE')}}"
                                                            placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_INGRESE_LOTE')}}"
                                                            label-placement="floating" fill="outline" #loteDepInput
                                                            (ionChange)="setLote($event,dep,inventariosLogicService.productSelected.idProduct,'dep')"
                                                            (ionInput)="loteDepInput.value = cleanLoteInput(loteDepInput.value);
                                                            typeStockDep.lote = cleanString(typeStockDep.lote);"
                                                            [value]="typeStockDep.lote" color="primary" required="true"
                                                            class="form-control" required min="2" appForbiddenName="bob"
                                                            [(ngModel)]="typeStockDep.lote" #name="ngModel" name="lote">
                                                        </ion-input>
                                                    </ion-col>

                                                    <ion-col size="12" size-sm="12" size-xs="12" *ngIf="expirationBatch"
                                                        class="ion-margin-top ion-margin-bottom mt-20 mb-20">
                                                        <ion-col size="12" size-sm="12" size-xs="12"
                                                            class="ion-margin-top ion-margin-bottom mt-20 mb-20">
                                                            <ion-label
                                                                class="ion-margin-top ion-margin-bottom mt-20 mb-20">{{this.inventariosLogicService.inventarioTags.get('INV_FECHAVENCIMIENTO')}}</ion-label>
                                                        </ion-col>
                                                        <ion-col size="12" size-sm="12" size-xs="12">
                                                            <ion-button (click)="setShowDateModalDep(dep, true)"
                                                                color="light" class="letrasFechasButton">
                                                                {{ dateServ.formatShort(typeStockDep.fechaVencimiento)
                                                                }}
                                                            </ion-button>
                                                            <!-- <a>
                                                                <ion-icon slot="end" src="../../../assets/icon/calendar-outline.svg"></ion-icon>
                                                            </a> -->
                                                        </ion-col>

                                                        <ion-modal [keepContentsMounted]="true"
                                                            [isOpen]="typeStockDep.showDateModalDep"
                                                            (didDismiss)="setShowDateModalDep(dep, false)"
                                                            class="fechasModal">
                                                            <ng-template>
                                                                <ion-datetime [id]="'fechaVencimiento'+dep"
                                                                    presentation="date"
                                                                    [(ngModel)]="typeStockDep.fechaVencimiento"
                                                                    (ngModelChange)="getFechaValor(typeStockDep.fechaVencimiento,dep,inventariosLogicService.productSelected.idProduct,'dep')"
                                                                    [showDefaultButtons]="true"
                                                                    doneText="{{this.inventariosLogicService.inventarioTags.get('INV_BOTON_ACEPTAR')}}"
                                                                    cancelText="{{this.inventariosLogicService.inventarioTags.get('INV_BOTON_CANCELAR')}}">
                                                                </ion-datetime>
                                                            </ng-template>
                                                        </ion-modal>
                                                    </ion-col>

                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <div class="listado-enterprise-selector ion-text-center">
                                                            <ion-select
                                                                placeholder="{{this.inventariosLogicService.inventarioTags.get('INV_SELECTOR_PLACEHOLDER')}}"
                                                                class="ion-text-center always-flip"
                                                                [(ngModel)]="this.inventariosLogicService.unitSelected"
                                                                (ionChange)="selectProducUnit($event,dep,'dep')">
                                                                <ion-select-option
                                                                    *ngFor="let producUnit of inventariosLogicService.productSelected.productUnitList"
                                                                    [value]="producUnit">
                                                                    {{ producUnit.naUnit }}
                                                                </ion-select-option>
                                                            </ion-select>
                                                        </div>
                                                    </ion-col>

                                                    <ion-col size="12" size-sm="12" size-xs="12">
                                                        <ion-button size="small"
                                                            (click)="deleteTypeStock(dep,inventariosLogicService.productSelected.idProduct,'dep',inventariosLogicService.productSelected)"
                                                            color="danger">
                                                            <ion-icon slot="icon-only" name="trash"></ion-icon>
                                                        </ion-button>
                                                    </ion-col>
                                                </div>
                                            </ion-list>
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </div>
                        </ion-accordion>
                        <!-- DEPOSITO -->
                    </ion-accordion-group>
                </ion-col>
            </div>
        </ion-col>
    </ion-row>

</ion-grid>
<app-message></app-message>