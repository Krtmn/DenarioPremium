<ion-app>
  <ion-router-outlet></ion-router-outlet>
  <!-- ...existing code... -->

  <!-- FAB global (botón principal + lista de opciones) -->
  <ion-fab *ngIf="showFab" vertical="bottom" horizontal="end" slot="fixed" class="global-calc-fab">
    <!-- Botón principal: al clickearlo, el FAB se desplegará mostrando las opciones -->
    <ion-fab-button aria-label="Abrir opciones">
      <ion-icon name="chevron-up-outline"></ion-icon>
    </ion-fab-button>

    <!-- Lista de opciones que aparece al desplegar el FAB. Añadir más botones aquí si es necesario. -->
    <ion-fab-list side="top">
      <ion-fab-button class="calculator-btn" (click)="toggleCalculator()" aria-label="Abrir calculadora">
        <ion-icon name="calculator-outline"></ion-icon>
      </ion-fab-button>
      <!-- Ejemplo: botón adicional (descomentá/ajustá según tus necesidades)
      <ion-fab-button (click)="otraAccion()" aria-label="Otra acción">
      <ion-icon name="star"></ion-icon>syn
      </ion-fab-button>
      -->
    </ion-fab-list>
  </ion-fab>

  <ion-card *ngIf="showCalculator" class="floating-calculator" role="dialog" aria-label="Calculadora">
    <ion-card-header>
      <ion-card-title class="ion-text-center">Calculadora</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-grid *ngIf="companies && companies.length > 1">
        <ion-row>
          <ion-col size="4">
            <ion-item lines="none">
              <ion-label>Empresa</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="8">
            <ion-select class="listado-enterprise-selector ion-text-center" [(ngModel)]="selectedCompany"
              (ionChange)="onCompanyChange($event)" placeholder="Seleccione">
              <ion-select-option *ngFor="let e of companies" [value]="e">{{ e.lbEnterprise }}</ion-select-option>
            </ion-select>
          </ion-col>
        </ion-row>
      </ion-grid>



      <!-- <div class="company-info" *ngIf="selectedCompany">
      <small>Empresa seleccionada: <strong>{{ selectedCompany.lbEnterprise }}</strong></small>
    </div> -->

      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Base USD</ion-label>
              <ion-input type="text" [(ngModel)]="baseUSDInput" (ionInput)="onBaseInput($event)" inputmode="numeric"
                placeholder="0.00">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Porcentaje Descuento USD</ion-label>
              <ion-input type="text" [(ngModel)]="descuentoUSDInput" (ionInput)="onDescuentoInput($event)"
                inputmode="numeric" placeholder="0.00">
              </ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label>Calcular IVA 16%</ion-label>
              <ion-checkbox slot="start" [(ngModel)]="calcularIVA" (ionChange)="recalcTotals()"></ion-checkbox>
            </ion-item>
          </ion-col>

          <ion-col size="12" *ngIf="calcularIVA">
            <ion-item>
              <ion-label position="stacked">IVA % USD</ion-label>
              <ion-input type="text" [(ngModel)]="ivaUSDInput" (ionInput)="onIVAInput($event)" inputmode="numeric"
                placeholder="16,00" readonly>
              </ion-input>
            </ion-item>
          </ion-col>



          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Descuento USD</ion-label>
              <ion-input type="number" [(ngModel)]="descuentoUSD" (ionChange)="recalcTotals()" placeholder="0.00"
                readonly></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12" *ngIf="calcularIVA">
            <ion-item>
              <ion-label position="stacked">Total IVA USD</ion-label>
              <ion-input type="text" [value]="totalIVAUSD | number:'1.2-2'" readonly></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Total USD</ion-label>
              <ion-input type="text" [value]="totalUSD | number:'1.2-2'" readonly></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Total Tasa BCV</ion-label>
              <ion-input type="text" [value]="totalTasaBCV | number:'1.2-2'" readonly></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="stacked">Total Tasa Paralelo USD</ion-label>
              <ion-input type="text" [value]="totalTasaParaleloUSD | number:'1.2-2'" readonly></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>


      <ion-grid>
        <ion-row>
          <ion-col size="10" offset="1">
            <div class="calc-actions">
              <ion-button expand="block" class="botonAddLila" (click)="toggleCalculator()">Cerrar</ion-button>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>


    </ion-card-content>
  </ion-card>

</ion-app>